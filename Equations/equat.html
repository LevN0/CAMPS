

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Equation output files &mdash; camps 1.0.0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="References" href="../references.html" />
    <link rel="prev" title="Time Coordinates" href="../Coordinates/time_coords.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> camps
          

          
            
            <img src="../_static/CAMPS.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../statPP_background/index.html">Statistical Post-Processing Background</a></li>
<li class="toctree-l1"><a class="reference internal" href="../netcdf_CAMPS_standard.html">Towards a new NetCDF-CAMPS Standard</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../Netcdf_CAMPS_Structure.html">NetCDF-CAMPS Structure</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../Attributes/attribute_names.html">Attribute Names</a></li>
<li class="toctree-l2"><a class="reference internal" href="../P_A_variables/variables.html">Primary and Ancillary Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Observed_Property_Used_Procedure/OP_UP.html">Observed Property and Used Procedure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Coordinates/geo_coords.html">Geospatial Coordinates</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Coordinates/time_coords.html">Time Coordinates</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Equation output files</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#global-attributes">Global attributes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#equation-output-variables">Equation output variables</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../references.html">References</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../codes_registry/index.html">The NWS Codes Registry:  Using linked data to support CAMPS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../technical/index.html">CAMPS Techinical description</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">camps</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../Netcdf_CAMPS_Structure.html">NetCDF-CAMPS Structure</a> &raquo;</li>
        
      <li>Equation output files</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/Equations/equat.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="equation-output-files">
<h1>Equation output files<a class="headerlink" href="#equation-output-files" title="Permalink to this headline">¶</a></h1>
<p>StatPP techniques that include a distinct Training Phase often yield a set of equations
(StatPP Parameters) that are used to carry information into the Production Phase.
(See section <a class="reference internal" href="../statPP_background/index.html#background"><span class="std std-ref">Statistical Post-Processing Background</span></a> of the Overview for a more complete explanation of these terms.)
Of course, these equations must be encoded in one or more equation output files.</p>
<p>The Observations and Measurements (O&amp;M) model is again used as a guideline when encoding data
files. However, we focus more on the W3C Provenance Ontology (PROV-O) as a model for encoding
StatPP equation output. The various values stored in the equation output file are <em>entities</em> (equation coefficients and
other ancillary data) that were generated by some <em>activity</em> (e.g. the Development Phase), and
that activity was performed by some <em>agent</em> (the responsible organization).</p>
<p>In most cases a StatPP Equation File will contain one or more weather elements with their associated
metadata, that were used as inputs into the regression, that create a set of outputs. These outputs
include; an array of equation coefficient (including the Equation Constant), statistical values (Reduction_of_Variance,
Average_Predictand, etc…), and any associated ancillary and auxiliary coordinate variables.</p>
<blockquote>
<div><p><strong>Best Practice:</strong>  <em>Files that potentially contain equation output
should contain global attributes that describe the origin of the file itself. Some useful attributes
include PROV__Entity, PROV__wasGeneratedBy, PROV__wasAtributedTo, and PROV__generatedAtTime.</em></p>
<p><strong>Best Practice:</strong>  <em>Equation output variables that are used in StatPP and the names of their dimensions should have
names that are drawn from the nomenclature of the technique.</em></p>
<p><strong>Best Practice:</strong>  <em>All equation output variables should include the attribute PROV__Entity or something
similar that indicates the nature of the variable and its use. Ideally, both the attribute name and value
will be web-referencible URIs.</em></p>
</div></blockquote>
<div class="section" id="global-attributes">
<h2>Global attributes<a class="headerlink" href="#global-attributes" title="Permalink to this headline">¶</a></h2>
<p>We begin with a set of global attributes that describe the file itself.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">|</span>   <span class="p">:</span><span class="n">StatPPTime__FcstCyc</span> <span class="o">=</span> <span class="s2">&quot;06&quot;</span> <span class="p">;</span>
<span class="o">|</span>   <span class="p">:</span><span class="n">StatPPTime__SeasDayFmt</span> <span class="o">=</span> <span class="s2">&quot;StatPP__Data/Time/SeasDayFmt/MMDD&quot;</span> <span class="p">;</span>
<span class="o">|</span>   <span class="p">:</span><span class="n">PROV__wasAttributedTo</span> <span class="o">=</span> <span class="s2">&quot;StatPP__Data/Source/MDL&quot;</span> <span class="p">;</span>
<span class="o">|</span>   <span class="p">:</span><span class="n">institution</span> <span class="o">=</span> <span class="s2">&quot;NOAA/National Weather Service&quot;</span> <span class="p">;</span>
<span class="o">|</span>   <span class="p">:</span><span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;http://www.nws.noaa.gov/mdl/, https://sats.nws.noaa.gov/~wisps/&quot;</span> <span class="p">;</span>
<span class="o">|</span>   <span class="p">:</span><span class="n">season</span> <span class="o">=</span> <span class="s2">&quot;warm&quot;</span> <span class="p">;</span>
<span class="o">|</span>   <span class="p">:</span><span class="n">StatPPTime__SeasEndDay</span> <span class="o">=</span> <span class="s2">&quot;0706&quot;</span> <span class="p">;</span>
<span class="o">|</span>   <span class="p">:</span><span class="n">PROV__wasGeneratedBy</span> <span class="o">=</span> <span class="s2">&quot;StatPP__Methods/Stat/MOSDev&quot;</span> <span class="p">;</span>
<span class="o">|</span>   <span class="p">:</span><span class="n">StatPPSystem__Status</span> <span class="o">=</span> <span class="s2">&quot;StatPP__Methods/System/Status/Dev&quot;</span> <span class="p">;</span>
<span class="o">|</span>   <span class="p">:</span><span class="n">StatPPTime__SeasBeginDay</span> <span class="o">=</span> <span class="s2">&quot;0702&quot;</span> <span class="p">;</span>
<span class="o">|</span>   <span class="p">:</span><span class="n">PROV__Entity</span> <span class="o">=</span> <span class="s2">&quot;StatPP__Data/Source/MOSEqnFile&quot;</span> <span class="p">;</span>
<span class="o">|</span>   <span class="p">:</span><span class="n">version</span> <span class="o">=</span> <span class="s2">&quot;WISPS-1.0&quot;</span> <span class="p">;</span>
<span class="o">|</span>   <span class="p">:</span><span class="n">file_id</span> <span class="o">=</span> <span class="s2">&quot;7426a556-9b99-468e-b73e-3825b763ce80&quot;</span> <span class="p">;</span>
<span class="o">|</span>   <span class="p">:</span><span class="n">Conventions</span> <span class="o">=</span> <span class="s2">&quot;CF-1.7 WISPS-1.0&quot;</span> <span class="p">;</span>
<span class="o">|</span>   <span class="p">:</span><span class="n">primary_variables</span> <span class="o">=</span> <span class="s2">&quot;MOS_Equations Standard_Error_Estimate Reduction_of_Variance Multiple_Correlation_Coefficient Predictand_Average&quot;</span> <span class="p">;</span>
<span class="o">|</span>   <span class="p">:</span><span class="n">StatPPTime__FcstCycFmt</span> <span class="o">=</span> <span class="s2">&quot;StatPP__Data/Time/FcstCycFmt/HH&quot;</span> <span class="p">;</span>
</pre></div>
</div>
<p>The W3C standard for provenance (PROV-O) provides key entries to describe the file and its history. Entries declare what sort of file this is,
how it was generated, the file version, the primary source of its contents, who created it, and when.
Many of these entries are entries in a codes registry where they can be more fully described by the data producer.</p>
<p>Included in the list of global attributes are three attributes support a common StatPP practice called “seasonal stratification.”
Since a number of NWP biases change seasonally as weather patterns (and their simulation) shift,
many StatPP techniques repeat their development phase multiple times with seasonal datasets.
Thus, StatPPTime__SeasBeginDay and StatPPTime__SeasEndDay convey the first and last dates (in any year)
these equation outputs should be used. StatPPTime__SeasDayFmt conveys the encoding format for these dates.
Similarly, many StatPP techniques stratify their development phase by forecast cycle.
The next two attributes, StatPPTime__ForecastCycle and StatPPTime__FcstCycFmt, convey this concept.
Additionally, the attribute “season” should be included int he list of global attributes, identifying
the appropriate season for which the equation output is valid.</p>
<p>Finally, the attributes StatPPSystem__Status and StatPPSystem__Role reflect the practices of the author’s institution.
They are presented here as a pattern that other data producers may choose to emulate.
StatPPSystem__Status tracks the maturity of the equations as they go through their development life cycle.
It can convey values such as <em>developmental</em>, <em>prototype</em>, <em>operational</em>, and <em>experimental</em>.
StatPPSystem__Role is also patterned on a specific institution and technique.
StatPPSystem__Role can take on the values <em>primary</em> and <em>backup</em>, designating primary and backup MOS equations.
(Primary equations are developed in ways that permit the most recent observation to serve as a predictor; backup
equations are developed with that predictor withheld.)</p>
</div>
<div class="section" id="equation-output-variables">
<h2>Equation output variables<a class="headerlink" href="#equation-output-variables" title="Permalink to this headline">¶</a></h2>
<p>The StatPP coefficients and Equation_Constant, for one or more MOS equations, should be saved as a single variable in the
equation output file, dimensioned by the number of stations, the number of coefficients (including the Equation_Constant)
and the number of Predictands. The StatPP statistics, for one or more MOS equations, should each be stored as individual
variables. The first example, below, contains the coefficients (including the Equation_Constant) of a set of MOS equations.
Note that the name of this variable and its dimensionality are not part of the CAMPS standard.
Rather, attributes are used to convey the information needed to successfully interpret the
variable’s contents.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">|</span>    <span class="nb">float</span> <span class="n">MOS_Equations</span><span class="p">(</span><span class="n">number_of_stations</span><span class="p">,</span> <span class="n">max_eq_terms</span><span class="p">,</span> <span class="n">number_of_predictands</span><span class="p">)</span> <span class="p">;</span>
<span class="o">|</span>      <span class="n">MOS_Equations</span><span class="p">:</span><span class="n">PROV__Entity</span> <span class="o">=</span> <span class="s2">&quot;StatPP__Methods/Stat/MOS/MOSEqn&quot;</span> <span class="p">;</span>
<span class="o">|</span>      <span class="n">MOS_Equations</span><span class="p">:</span><span class="n">standard_name</span> <span class="o">=</span> <span class="s2">&quot;source&quot;</span> <span class="p">;</span>
<span class="o">|</span>      <span class="n">MOS_Equations</span><span class="p">:</span><span class="n">long_name</span> <span class="o">=</span> <span class="s2">&quot;MOS Equation Coefficients and Constants&quot;</span> <span class="p">;</span> <span class="n">MOS_Equations</span><span class="p">:</span><span class="n">coordinates</span> <span class="o">=</span> <span class="s2">&quot;station Equations_List Predictand_List&quot;</span> <span class="p">;</span>
<span class="o">|</span>      <span class="n">MOS_Equations</span><span class="p">:</span><span class="n">SOSA__usedProcedure</span> <span class="o">=</span> <span class="s2">&quot;( PolyLinReg )&quot;</span> <span class="p">;</span>
<span class="o">|</span>      <span class="n">MOS_Equations</span><span class="p">:</span><span class="n">ancillary_variables</span> <span class="o">=</span> <span class="s2">&quot;( MOS_Predictor_Coeffs Equation_Constant )&quot;</span> <span class="p">;</span>
<span class="o">|</span>      <span class="n">MOS_Equations</span><span class="p">:</span><span class="n">units</span> <span class="o">=</span> <span class="mi">1</span><span class="n">LL</span> <span class="p">;</span>
</pre></div>
</div>
<p>The first, and perhaps most important, attribute we will discuss is PROV__Entity.
In effect, PROV__Entity helps the data producer convey to the data consumer “what it is.”
In this case, it is the coefficients of one or more MOS Equations.
Ideally, the technical information found at StatPP__Data/Source/MOSEq will be sufficient to allow
a data consumer to read these data and use them effectively.</p>
<p>Additionally, the ancillary_variables attribute for a MOS_equations variable should contain a
reference to the non-data-bearing variables “MOS_Predictor_Coeffs and Equation_Constant.
These variables contain the appropriate metadata description to identify the type of information a MOS_equations variable contains.</p>
<p>The auxiliary coordinate variable attribute for a MOS equations output variable references an Equations_List
and Predictand_List variable. These variables provide ordered lists that apply to the dimensions of the MOS equation variable.</p>
<p>Equations_List  corresponds to the dimension max_eq_terms, which stores an ordered list of the predictors that
provide input to the set of equations, along with the equation constant, as a character array. The ordered input
list references the non-data-bearing predictor variables that appear elsewhere in the file.
The attributes assigned to each of those variables, provide all the metadata needed to access and use the predictors.</p>
<p>Predictand_List provides an ordered character output array, which plays a complementary role by identifying the predictands that are forecast by the equations.</p>
<p>In addition to the MOS equation variable, ordered input and output lists, and non-data-bearing predictor and predictand variables,
there are a number of variables that contain diagnostic information about the MOS development process.  Each of these variables is
stored individually as primary variables within an equations output file. The following CDL shows an example of how such variables are encoded.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">|</span>    <span class="nb">float</span> <span class="n">Standard_Error_Estimate</span><span class="p">(</span><span class="n">number_of_stations</span><span class="p">,</span> <span class="n">number_of_predictands</span><span class="p">)</span> <span class="p">;</span>
<span class="o">|</span>      <span class="n">Standard_Error_Estimate</span><span class="p">:</span><span class="n">PROV__Entity</span> <span class="o">=</span> <span class="s2">&quot;StatPP__Methods/Stat/MOS/OutptParams/MOSStdErrEst&quot;</span> <span class="p">;</span>
<span class="o">|</span>      <span class="n">Standard_Error_Estimate</span><span class="p">:</span><span class="n">standard_name</span> <span class="o">=</span> <span class="s2">&quot;source&quot;</span> <span class="p">;</span>
<span class="o">|</span>      <span class="n">Standard_Error_Estimate</span><span class="p">:</span><span class="n">long_name</span> <span class="o">=</span> <span class="s2">&quot;MOS Standard Error Estimate&quot;</span> <span class="p">;</span>
<span class="o">|</span>      <span class="n">Standard_Error_Estimate</span><span class="p">:</span><span class="n">coordinates</span> <span class="o">=</span> <span class="s2">&quot;station Predictand_List&quot;</span> <span class="p">;</span>
<span class="o">|</span>      <span class="n">Standard_Error_Estimate</span><span class="p">:</span><span class="n">SOSA__usedProcedure</span> <span class="o">=</span> <span class="s2">&quot;( PolyLinReg )&quot;</span> <span class="p">;</span>
<span class="o">|</span>      <span class="n">Standard_Error_Estimate</span><span class="p">:</span><span class="n">units</span> <span class="o">=</span> <span class="mi">1</span><span class="n">LL</span> <span class="p">;</span>
<span class="o">|</span>    <span class="nb">float</span> <span class="n">Reduction_of_Variance</span><span class="p">(</span><span class="n">number_of_stations</span><span class="p">,</span> <span class="n">number_of_predictands</span><span class="p">)</span> <span class="p">;</span>
<span class="o">|</span>      <span class="n">Reduction_of_Variance</span><span class="p">:</span><span class="n">PROV__Entity</span> <span class="o">=</span> <span class="s2">&quot;StatPP__Methods/Stat/MOS/OutptParams/MOSRedOfVar&quot;</span> <span class="p">;</span>
<span class="o">|</span>      <span class="n">Reduction_of_Variance</span><span class="p">:</span><span class="n">standard_name</span> <span class="o">=</span> <span class="s2">&quot;source&quot;</span> <span class="p">;</span>
<span class="o">|</span>      <span class="n">Reduction_of_Variance</span><span class="p">:</span><span class="n">long_name</span> <span class="o">=</span> <span class="s2">&quot;MOS Reduction of Variance&quot;</span> <span class="p">;</span>
<span class="o">|</span>      <span class="n">Reduction_of_Variance</span><span class="p">:</span><span class="n">coordinates</span> <span class="o">=</span> <span class="s2">&quot;station Predictand_List&quot;</span> <span class="p">;</span>
<span class="o">|</span>      <span class="n">Reduction_of_Variance</span><span class="p">:</span><span class="n">SOSA__usedProcedure</span> <span class="o">=</span> <span class="s2">&quot;( PolyLinReg )&quot;</span> <span class="p">;</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../references.html" class="btn btn-neutral float-right" title="References" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../Coordinates/time_coords.html" class="btn btn-neutral float-left" title="Time Coordinates" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
      <span class="lastupdated">
        Last updated on Aug 20, 2020.
      </span>

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>